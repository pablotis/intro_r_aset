---
title: "Procesamiento de datos con {tidyverse}"
subtitle: "<a style='float:left'></div><hr color='#EB811B' size=1px width=1125px>"
author: '<a href="https://linktr.ee/estacion_r"><img src="../estilo/logo/Logo_PNG_Alta_Mesa de trabajo 1 copia 4.png" alt="estacion-R logo" style="width:320px;height:270px;">
</a>'
output:
  xaringan::moon_reader:
    self_contained: true
    css: ../estilo/presentation_styles.css
    includes:
      after_body: ../estilo/insert-logo.html
    lib_dir: libs
    nature:
      ratio: 16:9
      highlightStyle: github
      highlightLines: true
      highlightSpans: true
      countIncrementalSlides: false
---


```{r, include = F}
# This is the recommended set up for flipbooks
# you might think about setting cache to TRUE as you gain practice --- building flipbooks from scratch can be time consuming
#knitr::opts_chunk$set(fig.width = 10, message = FALSE, warning = FALSE)

options(htmltools.dir.version = FALSE,
        tibble.width = NULL)

knitr::opts_chunk$set(collapse = TRUE,
                      fig.retina = 3,
                      fig.width = 10,
                      out.width = 300, ### control plot size
                      #cache = TRUE,
                      warning = FALSE,
                      message = FALSE,
                      comment = "", 
                      cache = FALSE)


library(flipbookr)
library(tidyverse)
library(xaringan)
library(xaringanthemer)
library(xaringanExtra)
library(here)
library(countdown)
```


```{r xaringan-panelset, echo=FALSE}
xaringanExtra::use_panelset()

xaringanExtra::style_panelset_tabs(
  active_foreground = "#0051BA",
  hover_foreground = "#d22",
  font_family = "Roboto"
)
```

```{r xaringan-extra-styles, echo=FALSE}
xaringanExtra::use_extra_styles(
  hover_code_line = TRUE,         #<<
  mute_unhighlighted_code = TRUE  #<<
)
```



# ¬øQu√© vimos?

<br>

‚úÖ Conceptos b√°sicos de R (valores, vectores, data.framtes, funciones, objetos)

<br>

‚úÖ C√≥mo armar y organizar un proyecto de trabajo

<br>

‚úÖ Qu√© son los paquetes (o librer√≠as)

---
## Hoja de Ruta

.pull-left[

üìå Flujo de trabajo en el Procesamiento de Datos

<br>

üì¶ Paquete `{dplyr}`

```         
üîß `select()` üîß `filter()` 

üîß `mutate()` üîß `rename()` 

üîß `arrange()` 

üîß `group_by()` üîß `summarise()`  

üîß `joins` 
```
]

.pull-right[

üìå La pipa (`|>` o `%>%`)

<br>

üì¶ Paquete `{tidyr}`

```         
üîß `pivot_longer()` üîß `pivot_wider()`  
```
]

---
## Configuraci√≥n para esta clase

<br>

-   Armar un proyeto de trabajo nuevo

-   Crear una carpeta en el llamada `datos`

-   Descargar la base de juguete [**relevamiento_indice_transparencia_2024.xlsx**](file:///home/pablote/Pablo/Proyectos/Estaci%C3%B3n%20R/Consultor%C3%ADa/intro_r_aaip/docs/datos/relevamiento_indice_transparencia_2024.xlsx) (Argentina) y ubicarla en la carpeta `datos`

-   Crear un **script** de trabajo.

---
class: center, middle, inverse, hide-logo
# Flujo de trabajo en el Procesamiento de Datos

---
## Flujo de trabajo en el Procesamiento de Datos

```{r echo=FALSE, out.width= '60%', fig.align='center'}
knitr::include_graphics(here::here("img/clase_3/proceso_ciencia_datos.jpg"))
```

---
class: center, middle, inverse, hide-logo

# `{tidyverse}`

---
## ¬øQu√© es `{tidyverse}`?


-   Una colecci√≥n de paquetes.

-   Comparten una filosof√≠a acerca de los datos y la programaci√≥n en R ("*tidy*" -*ordenado*-).

-   Tienen una coherencia para ser utilizados en conjunto.

-   Orientado a ser le√≠do y escrito por y para seres humanos.

-   Una comunidad, basada en los principios del c√≥digo abierto y trabajo colaborativo.


---
## ¬øQu√© es `{tidyverse}`?

```{r echo=FALSE, out.width= '60%', fig.align='center'}
knitr::include_graphics(here::here("img/clase_3/circuito_del_dato_tidy.png"))
```


---
## `{tidyverse}`

<br>

-   Instalaci√≥n:

``` r
install.packages("tidyverse")
```

---
## `{tidyverse}`

<br>

-   Cargo el paquete:

```{r message=TRUE, warning=TRUE}
library(tidyverse)
```

---
## `{tidyverse}`

-   Nos evita tener que instalar uno por uno a cada paquete:

``` r
install.packages("dplyr")
install.packages("tidyr")
install.packages("ggplot2")
```

<br>

-   Como tambi√©n tener que convocarlos de a uno:

``` r
library(dplyr)
library(tidyr)
library(ggplot2)
```

---
class: center, middle, hide-logo

![](../img/clase_3/logo dplyr.png)

```{r echo=FALSE, out.width = '10%', fig.align = 'center', eval=FALSE}
knitr::include_graphics(here::here("img/clase_3/logo dplyr.png"))
```


---
## Funciones del paquete dplyr:

<br>

| **Funci√≥n**   |                            **Acci√≥n** |
|:--------------|--------------------------------------:|
| `select()`    |     *selecciona o descarta variables* |
| `filter()`    |                    *selecciona filas* |
| `mutate()`    |              *crea / edita variables* |
| `rename()`    |                  *renombra variables* |
| `group_by()`  | *segmenta en funcion de una variable* |
| `summarize()` |         *genera una tabla de res√∫men* |


---
class: center, middle, inverse, hide-logo

# **select()**

<html><hr color='#EB811B' size=1px width=1600px></html>

<html><p style="color:white;" align:"left">Elige o descarta columnas de una base de datos</p></html>


---
## `select()`

<br>

-   La funci√≥n tiene la siguiente estructura:

  - Escribo la funci√≥n --> Doy el primer argumento: la `base de datos`
```{r}
#| eval: false
select(`base_de_datos`,
       variable1, variable2) 
```

--

- Indico el segundo conjunto de argumentos: las `variables (columnas)` a seleccionar
```{r}
#| eval: false
select(base_de_datos, 
       `variable1, variable2`)
```

---
## `select()`

```{r}
#| eval: false
select(base_de_datos, 
       id, nombre) #<<
```

```{r echo=FALSE, fig.align = 'center', out.width='65%'}
knitr::include_graphics(here::here("img/clase_3/select_presentacion.png"))
```


---
## Caso pr√°ctico

```{r}
#| include: false
#| echo: false
library(rio)
base_ind_transp <- import(here::here("datos/relevamiento_indice_transparencia_2024.xlsx"))
```

```r
# Cargo paquete
library(rio)

# Importo datos
base_ind_transp <- import("datos/relevamiento_indice_transparencia_2024.xlsx")
```

<br>

```{r}
# Exploro la base
colnames(base_ind_transp)
```

---
## Caso pr√°ctico

<br>

- **Pedido:** Me han solicitado una base que contenga las variables de tiempo e identificacion del tipo de organismo

<br>

- Variables de trabajo:

  - *Marca temporal*
  - *Per√≠odo*
  - *Tipo de organismo*


---
## Caso pr√°ctico

- Selecciono las 3 columnas de inter√©s

```{r}
library(tidyverse)

select(base_ind_transp, #<<
       "Marca temporal", "Per√≠odo", "Tipo de organismo") #<<
```


---
class: center, middle, inverse, hide-logo

# La pipa


---
## Un operador llamado `pipa`

<br>

<br>

.pull-left[

<br>

```{r eval=FALSE}
base_de_datos |>
  funcion1 |> 
  funcion2 |> 
  funcion3
```
]

.pull-right[

![](../img/clase_3/pipa.gif)
]


---
## Un operador llamado `pipa`

<br>

-   Pipa de **R base**: `|>`

<br>

-   Pipa de **{magritr}**: `%>%`


---
## `select()` + La `pipa`

#### Antes

```{r eval=FALSE}
select(`base_ind_transp`, 
       "Marca temporal", "Per√≠odo", "Tipo de organismo")
```

--

#### Despu√©s

```{r eval=FALSE}
 `base_ind_transp` %>% 
  select("Marca temporal", "Per√≠odo", "Tipo de organismo")
```

---
class: middle, center, inverse, hide-logo

# PREGUNTA

---
## Pregunta

<br>

* Cu√°l es la diferencia entre esta sentencia:

```{r eval=FALSE}
select(base_ind_transp, 
       "Marca temporal", "Per√≠odo", "Tipo de organismo")
```

--

* Y esta sentencia:


```{r echo=FALSE}
 base_ind_transp_seleccion <- select(base_ind_transp, 
       "Marca temporal", "Per√≠odo", "Tipo de organismo")
```

```{r eval=FALSE}
 base_ind_transp_seleccion <- select(base_ind_transp, 
       "Marca temporal", "Per√≠odo", "Tipo de organismo")
```

---
## Pregunta

<br>

* Cu√°l es la diferencia entre esta sentencia:

```{r eval=FALSE}
select(base_ind_transp, 
       "Marca temporal", "Per√≠odo", "Tipo de organismo")
```

* Y esta sentencia:

```{r eval=FALSE}
 `base_ind_transp_seleccion` <- select(base_ind_transp, 
       "Marca temporal", "Per√≠odo", "Tipo de organismo")
```

---
## Caso pr√°ctico

-   Selecciono las 3 columnas de inter√©s

```{r}
#| code-line-numbers: "2"
library(tidyverse)

base_ind_trans_seleccion <- base_ind_transp |>
  select("Marca temporal", "Per√≠odo", "Tipo de organismo")
```

<br>
    
- Chequeo las columnas del nuevo objeto

```{r}
#| code-line-numbers: "1"
colnames(base_ind_transp_seleccion)
```


---
## `select()` - *por posici√≥n*

<br>
    
2. Selecciono

```{r}
#| code-line-numbers: "2"
base_ind_transp_seleccion_1 <- base_ind_transp |>
  select(1, 2, 3)
```

---
## `select()` - *por posici√≥n*

<br>

3. Chequeo

```{r}
colnames(base_ind_transp_seleccion_1)
```

---
## `select()` - *por posici√≥n (columnas consecutivas)*

<br>

```{r}
#| code-line-numbers: "2"
base_ind_transp_seleccion_2 <- base_ind_transp |>
  select(1:3)
```

---
## `select()` - *por posici√≥n (columnas consecutivas)*

<br>

```{r}
#| code-line-numbers: "2"
base_ind_transp_seleccion_2 <- base_ind_transp |>
  select(1:3)
```

<br>

```{r}
colnames(base_ind_transp_seleccion_2)
```

---
class: center, middle

![](https://imgs.search.brave.com/Frz7Kuv_uvyXQb269pQbZ2-UxWSZ-oIPOgfP4lTWmmU/rs:fit:860:0:0/g:ce/aHR0cHM6Ly9naWZk/Yi5jb20vaW1hZ2Vz/L2hpZ2gvc2FjaGEt/YmFyb24tY29oZW4t/dmVyeS1uaWNlLXFq/N2x5YXFudXBueTl6/ODAuZ2lm.gif)

---
## `select()` - *Por patrones de texto*

<br>

**Funciones auxiliares:**

-   `starts_with()` --\> *empieza con...*

-   `ends_with()` --\> *termina con...*

-   `contains()` --\> *contiene...*


---
## `select()` + `starts_with()`

<br>

```{r}
#| code-line-numbers: "2"
base_ind_transp_patron1 <- base_ind_transp |>
  select(starts_with("20"))
```

--

- Chequeo
```{r}
colnames(base_ind_transp_patron1)
```

---
## `select()` + `starts_with()`

<br>
      
---
## `select()` + `ends_with()`

<br>

```{r}
#| code-line-numbers: "2"
base_ind_transp_patron2 <- base_ind_transp |>
  select(ends_with("actualizaci√≥n)"))
```

--

- Chequeo
```{r}
colnames(base_ind_transp_patron2)
```


## `select()` + `starts_with()`

<br>

---
class: center, middle

![](https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExbjEzMW15cWk3bXJ5MzQ0aXQwd2IwenIyN3JseTlucW9nc2R0enY4NCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/Lk023zZqHJ3Zz4rxtV/giphy.gif)

---
## `select()` + `contains()`

<br>

```{r}
#| code-line-numbers: "2"
base_ind_transp_patron3 <- base_ind_transp |>
  select(contains("[U]"))
```

--

- Chequeo
```{r}
colnames(base_ind_transp_patron3)
```

---
class: center, middle

![](https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExYXprbDVsM2l1MmF5dDRjMGY1N2xiNW52dmFscHNsM3NhbDZ5eXc5NSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/NEvPzZ8bd1V4Y/giphy.gif)

---
class: middle, center, inverse, hide-logo

# LA COMBINACI√ìN FINAL

---
## `select()`

<br>

```{r}
#| code-line-numbers: "2"
base_ind_transp_tuto <- base_ind_transp |>
  select(Per√≠odo, 4, starts_with("Link"))

```

--

```{r}
colnames(base_ind_transp_tuto)
```

---
class: center, middle, hide-logo
![](../img/clase_3/explode.gif)


---
class: middle, center, inverse, hide-logo

# Ejercitaci√≥n grupal


---
## Ejercitaci√≥n

-   Crear un objeto en donde importamos la base de datos del relevamiento de sujetos obligados

-   Seleccionar 3 variables de la base seg√∫n el nombre de las mismas y guardar en otro objeto.

-   Seleccionar 3 variables de la base seg√∫n la posici√≥n de las mismas y guardar en otro objeto.

-   Seleccionar todas las variables que **empiecen** con un patr√≥n de texto (a elegir).


---
class: middle, center, inverse, hide-logo

# **filter()**

<html><hr color='#EB811B' size=1px width=1600px></html>

<html><p style="color:white;" align:"left">Elige o descarta columnas de una base de datos</p></html>


---
## `filter()`

<br>

-   La funci√≥n tiene la siguiente estructura:

```{r}
#| eval: false
#| code-line-numbers: "2"

filter(base_de_datos,
       condicion)
```

```{r echo=FALSE, fig.align = 'center', out.width='65%'}
knitr::include_graphics(here::here("img/clase_3/filter_presentacion.png"))
```


---
## `filter()`

<br>

-   `Con pipe`, la funci√≥n tiene la siguiente estructura:

```{r}
#| eval: false
#| code-line-numbers: "2"
base_de_datos |>
  filter(Edad > 65)
```

```{r echo=FALSE, fig.align = 'center', out.width='65%'}
knitr::include_graphics(here::here("img/clase_3/filter_presentacion.png"))
```

---
## Caso pr√°ctico

- Debo realizar un an√°lisis de la base de datos s√≥lo para los sujetos obligados de tipo `Universidades`.

<br>

**Universo de an√°lisis / Poblaci√≥n de estudio:**

- `Universidades`


---
## Caso pr√°ctico

- Chequeo qu√© tipo de organismos existen en la base de trabajo

--

```{r}
unique(base_ind_transp$`Tipo de organismo`)
```

---
## Caso pr√°ctico

-   Aplico filtro

```{r}
library(tidyverse)
base_filtrada <- base_ind_transp |>
  filter(`Tipo de organismo` == "Universidades")
```

--

-   Chequeo filtro

```{r}
unique(base_filtrada$`Tipo de organismo`)
```


---
## `filter()`

- Otra forma de chequeo: Contar casos

```{r}
base_ind_transp %>% 
  count(`Tipo de organismo`)
```

--

```{r}
base_filtrada %>% 
  count(`Tipo de organismo`)
```



---
## `filter()`

.pull-left[

| Condici√≥n | Acci√≥n              |
|:----------|:--------------------|
| `==`      | *igual*             |
| `%in%`    | *incluye*           |
| `!=`      | *distinto*          |
| `>`       | *mayor que*         |
| `<`       | *menor que*         |
| `>=`      | *mayor o igual que* |
| `<=`      | *menor o igual que* |

]

.pull-right[

| Operador | Descripci√≥n                                 |
|:---------|:--------------------------------------------|
| `&`      | *y* - Cuando se cumplen ambas condiciones   |
| `‚îÉ`       | *o* - Cuando se cumple una u otra condici√≥n |
 
]


---
## Caso pr√°ctico - Filtro m√∫ltiple

<br>

- Debo realizar un an√°lisis de la base de datos para los sujetos obligados de tipo `Universidades` y `Organismos Descentralizados`.

<br>


---
## Caso pr√°ctico - Filtro m√∫ltiple

- Chequeo qu√© tipo de organismos existen en la base de trabajo

--

```{r}
unique(base_ind_transp$`Tipo de organismo`)
```

---
## Caso pr√°ctico - Filtro m√∫ltiple

-   Aplico filtro

```{r}
base_filtrada <- base_ind_transp |>
  filter(`Tipo de organismo` == "Universidades" | `Tipo de organismo` == "Organismos Descentralizados")
```

--

-   Chequeo filtro

```{r}
unique(base_filtrada$`Tipo de organismo`)
```

---
## Caso pr√°ctico - Filtro m√∫ltiple - Operador `%in%`

-   Aplico filtro

```{r}
base_filtrada_operador_in <- base_ind_transp |>
  filter(`Tipo de organismo` %in% c("Universidades", "Organismos Descentralizados"))
```

--

-   Chequeo filtro

```{r}
unique(base_filtrada_operador_in$`Tipo de organismo`)
```


---
class: middle, center, inverse, hide-logo

# **mutate()**

<html><hr color='#EB811B' size=1px width=1600px></html>

<html><p style="color:white;" align:"left">Crea / edita variables (columnas)</p></html>


---
## `mutate()`

<br>

-   La funci√≥n tiene la siguiente estructura:

<br>

```{r}
#| eval: false
#| code-line-numbers: "2"
base_de_datos %>%
  mutate(`var_nueva` = var_1 + var_2)
```

---
## Caso pr√°ctico

- Tenemos la siguiente tabla con los valores del **√çndice de Transparencia**...

- Queremos redondear los valores, para poder presentarlos

```{r echo=FALSE}
base_resultados <- data.frame(
  sujeto_obligado = c("Instituto Nacional del Teatro", "Instituto Nacional del C√°ncer",
                      "Agencia de Planificaci√≥n (APLA)", "Oficina Anticorrupci√≥n",
                      "Fundaci√≥n Miguel Lillo"),
  indice_transparencia = c(2.5656, 76.23423, 32.123123, 89.1, 65.21331)
)

base_resultados
```

---
## Caso pr√°ctico

```{r echo=TRUE, eval=FALSE}
base_resultados %>%
  mutate(redondeo = round(indice_transparencia, digits = 1))
```

```{r echo=FALSE}
base_resultados %>%
  mutate(redondeo = round(indice_transparencia, digits = 1))
```

---
## Caso pr√°ctico
```{r echo=TRUE, eval=FALSE}
base_resultados %>%
  mutate(indice_transparencia = round(indice_transparencia, digits = 1))
```

```{r echo=FALSE}
base_resultados %>%
  mutate(indice_transparencia = round(indice_transparencia, digits = 1))
```

---
## `mutate()` + `case_when()`

- `case_when()` = _"Siempre que..."_ 

- Quiero determinado valor en mi nueva variable, _siempre que_ ocurra cierta condici√≥n

--

<br>

```{r echo=TRUE, eval=FALSE}
base_de_datos %>% 
  mutate(var_nueva = case_when(var_vieja == "a" `~` contenido_a,
                               var_vieja == "b" `~` contenido_b))
```


---
## `mutate()` + `case_when()`

- Recodificar variable `Periodo`:

```{r}
unique(base_ind_transp$Per√≠odo)
```

```{r}
base_recod <- base_ind_transp %>% 
  mutate(Per√≠odo = case_when(Per√≠odo == "ABRIL (Enero - Marzo 2024)" ~ "1er Trim",
                             Per√≠odo == "1¬∞ Trimestre 2024 (Enero - Marzo)" ~ "1er Trim",
                             Per√≠odo == "JULIO (Abril - Junio 2024)" ~ "2do Trim"))
```

--

```{r}
unique(base_recod$Per√≠odo)
```


---
## Limpieza de datos

```{r}
library(janitor)

base_limpia <- base_ind_transp %>% 
  select(`Universidades:`, `1.a) ¬øInforma al menos uno de los elementos solicitados? (misi√≥n, objetivos, o ambos)`) %>% 
  rename("universidades" = `Universidades:`,
         "1.a" = `1.a) ¬øInforma al menos uno de los elementos solicitados? (misi√≥n, objetivos, o ambos)`)
```

--

```{r}
colnames(base_limpia)
```



<!-- ## `mutate()` + `case_when()` = Recodificaci√≥n -->
              
<!-- <br>  -->
<!-- <br>  -->
              
              <!-- - Necesito agregarle una etiqueta a la variable `indice_tiempo` (pasar de `2020` a `"A√±o 2020"`) -->
              
              <!-- ## `mutate()` + `case_when()` = Recodificaci√≥n -->
              
              <!-- <br> -->
              
              <!-- ::: columns -->
              <!-- ::: {.column width="60%"} -->
              <!-- ```{r} -->
              <!-- #| eval: false -->
              <!-- #| code-line-numbers: "2" -->
              <!-- df_lugar_tot <- df_puna |>  -->
                <!--   select(indice_tiempo, localidad, plazas) -->
                <!-- ``` -->
                <!-- ::: -->
                
                <!-- ::: {.column width="40%"} -->
                <!-- ```{r} -->
                <!-- #| echo: false -->
                <!-- df_puna |>  -->
                <!--   select(indice_tiempo, localidad, plazas) -->
                <!-- ``` -->
                <!-- ::: -->
                <!-- ::: -->
                
                <!-- ## `mutate()` + `case_when()` = Recodificaci√≥n -->
                
                <!-- <br> -->
                
                <!-- ::: columns -->
                <!-- ::: {.column width="60%"} -->
                <!-- ```{r} -->
                <!-- #| eval: false -->
                <!-- #| code-line-numbers: "3,4,5" -->
                <!-- df_puna_recod <- df_puna |>  -->
                  <!--   select(indice_tiempo, localidad, plazas) |>  -->
                  <!--   mutate(anio_etiqueta = case_when(indice_tiempo == 2020 ~ "A√±o 2020", -->
                                                            <!--                                       indice_tiempo == 2021 ~ "A√±o 2021", -->
                                                            <!--                                       indice_tiempo == 2022 ~ "A√±o 2022")) -->
                  <!-- ``` -->
                  <!-- ::: -->
                  
                  <!-- ::: {.column width="40%"} -->
                  <!-- ```{r} -->
                  <!-- #| echo: false -->
                  <!-- df_puna |>  -->
                  <!--   select(indice_tiempo, localidad, plazas) |>  -->
                  <!--   mutate(anio_etiqueta = case_when(indice_tiempo == 2020 ~ "A√±o 2020", -->
                                                            <!--                                       indice_tiempo == 2021 ~ "A√±o 2021", -->
                                                            <!--                                       indice_tiempo == 2022 ~ "A√±o 2022")) -->
                  <!-- ``` -->
                  <!-- ::: -->
                  <!-- ::: -->
                  
                  
                  <!-- ## `mutate()` + `case_when()` = Recodificaci√≥n -->
                  
                  <!-- <br> -->
                  <!-- <br> -->
                  
                  <!-- - Necesito caracterizar al sector hotelero y compararlo con el resto de los alojamientos -->
                  
                  <!-- ## `mutate()` + `case_when()` = Recodificaci√≥n -->
                  
                  <!-- <br> -->
                  
                  <!-- ::: columns -->
                  <!-- ::: {.column width="60%"} -->
                  <!-- ```{r} -->
                  <!-- #| eval: false -->
                  <!-- #| code-line-numbers: "3,4" -->
                  <!-- df_puna_agrup <- df_puna |>  -->
                    <!--   select(tipo, plazas) |>  -->
                    <!--   mutate(tipo_agrupado = case_when(tipo == "Hoteleros" ~ "Hoteleros", -->
                                                              <!--                                    .default = "Otros")) -->
                    <!-- ``` -->
                    <!-- ::: -->
                    
                    <!-- ::: {.column width="40%"} -->
                    <!-- ```{r} -->
                    <!-- #| echo: false -->
                    <!-- df_puna |>  -->
                    <!--   select(tipo, plazas) |>  -->
                    <!--   mutate(tipo_agrupado = case_when(tipo == "Hoteleros" ~ "Hoteleros", -->
                                                              <!--                                    .default = "Otros")) -->
                    <!-- ``` -->
                    <!-- ::: -->
                    <!-- ::: -->
                    
                    
                    <!-- ## `mutate()` + `case_when()` = Recodificaci√≥n -->
                    
                    <!-- <br> -->
                    <!-- <br> -->
                    
                    <!-- - Necesito Reagrupar unicamente a los hoteles de 1, 2 y 3 estrellas, para compararlos frente al resto: -->
                    
                    
                    <!-- ## `mutate()` + `case_when()` = Recodificaci√≥n -->
                    
                    <!-- <br> -->
                    
                    <!-- ::: columns -->
                    <!-- ::: {.column width="60%"} -->
                    <!-- ```{r} -->
                    <!-- #| eval: false -->
                    <!-- #| code-line-numbers: "3,4,5,6" -->
                    <!-- df_puna_agrup_hotel <- df_puna |>  -->
                      <!--   select(clasificacion_minturdep, plazas) |>  -->
                      <!--   mutate(clasif_agrupado = case_when( -->
                                                                   <!--     clasificacion_minturdep %in% c("Hotel 1 estrella",  -->
                                                                                                             <!--                                    "Hotel 2 estrellas", -->
                                                                                                             <!--                                    "Hotel 3 estrellas") ~ "Hotel hasta 3 estrellas", -->
                                                                   <!--     .default = "Otros")) -->
                      <!-- ``` -->
                      <!-- ::: -->
                      
                      <!-- ::: {.column width="40%"} -->
                      <!-- ```{r} -->
                      <!-- #| echo: false -->
                      <!-- df_puna |>  -->
                      <!--   select(clasificacion_minturdep, plazas) |>  -->
                      <!--   mutate(clasif_agrupado = case_when( -->
                                                                   <!--     clasificacion_minturdep %in% c("Hotel 1 estrella",  -->
                                                                                                             <!--                                    "Hotel 2 estrellas", -->
                                                                                                             <!--                                    "Hotel 3 estrellas") ~ "Hotel hasta 3 estrellas", -->
                                                                   <!--     .default = "Otros")) -->
                      <!-- ``` -->
                      <!-- ::: -->
                      <!-- ::: -->
                      
                      <!-- # Ejercitaci√≥n grupal -->
                      
                      <!-- ## Ejercitaci√≥n -->
                      
                      <!-- - Necesito reagrupar la variable `clasificacion_minturdep` para quedarme con 2 categor√¨as: -->
                      
                      <!--     - `Camping` -->
                      
                      <!--     - `Otros` -->
                      
                      <!-- Dada la consigna anterior, rellenar en el campo marcado con `______` con el c√≥digo necesario para ejecutar la sentencia: -->
                      
                      <!-- ```r -->
                      <!-- df_puna |>  -->
                      <!--   select(localidad, ________) |>  -->
                      <!--   mutate(nueva_clasificacion = case_when(________ == "Camping" ~ "Camping", -->
                                                                      <!--                                          .default = "Otros")) -->
                      <!-- ``` -->
                      
                      
                      <!-- # **summarise()** -->
                      
                      <!-- <html> -->
                      
                      <!-- <hr color='#EB811B' size=1px width=1600px> -->
                        
                        <!-- </html> -->
                        
                        <!-- <html> -->
                        
                        <!-- ```{=html} -->
                        <!-- <p style="color:grey;" align:"left">Resume informaci√≥n y realiza c√°lculos</p> -->
                          <!-- ``` -->
                          <!-- </html> -->
                          
                          
                          <!-- ## `summarise()` -->
                          
                          <!-- <br> -->
                          
                          <!-- - Antes: -->
                          
                          <!-- ```{r} -->
                          <!-- sum(df_puna$plazas) -->
                          <!-- ``` -->
                          
                          <!-- ## `summarise()` -->
                          
                          <!-- <br> -->
                          
                          <!-- - Ahora: -->
                          
                          <!-- ```{r} -->
                          <!-- #| code-line-numbers: "2" -->
                          <!-- df_puna |>  -->
                          <!--   summarise(cant_plazas = sum(plazas)) -->
                          <!-- ``` -->
                          
                          <!-- ## `summarise()` -->
                          
                          <!-- <br> -->
                          
                          <!-- - Ahora: -->
                          
                          <!-- ```{r} -->
                          <!-- #| code-line-numbers: "2,3" -->
                          <!-- df_puna |>  -->
                          <!--   summarise(cant_plazas = sum(plazas), -->
                                             <!--             prom_plazas = mean(plazas)) -->
                          <!-- ``` -->
                          
                          <!-- ## `summarise()` -->
                          
                          <!-- <br> -->
                          
                          <!-- - Ahora: -->
                          
                          <!-- ```{r} -->
                          <!-- #| code-line-numbers: "2:5" -->
                          <!-- df_puna |>  -->
                          <!--   summarise(cant_plazas = sum(plazas), -->
                                             <!--             prom_plazas = mean(plazas), -->
                                             <!--             min_plazas  = min(plazas), -->
                                             <!--             max_plazas  = max(plazas)) -->
                          <!-- ``` -->
                          
                          
                          
                          <!-- # **group_by()** -->
                          
                          <!-- <html> -->
                          
                          <!-- <hr color='#EB811B' size=1px width=1600px> -->
                            
                            <!-- </html> -->
                            
                            <!-- <html> -->
                            
                            <!-- ```{=html} -->
                            <!-- <p style="color:grey;" align:"left">Ayuda a ejecutar una funci√≥n de forma agrupada</p> -->
                              <!-- ``` -->
                              <!-- </html> -->
                              
                              
                              <!-- ## `group_by()`  -->
                              
                              <!-- <br> -->
                              
                              <!-- - Antes: -->
                              
                              <!-- ```{r} -->
                              <!-- #| code-line-numbers: "2:5" -->
                              <!-- df_puna |>  -->
                              <!--   summarise(cant_plazas = sum(plazas), -->
                                                 <!--             prom_plazas = mean(plazas), -->
                                                 <!--             min_plazas  = min(plazas), -->
                                                 <!--             max_plazas  = max(plazas)) -->
                              <!-- ``` -->
                              
                              
                              <!-- ## `group_by()`  -->
                              
                              <!-- <br> -->
                              
                              <!-- - Despu√©s: -->
                              
                              <!-- ```{r} -->
                              <!-- #| code-line-numbers: "2" -->
                              <!-- df_puna |> -->
                              <!--   group_by(indice_tiempo) |>  -->
                              <!--   summarise(cant_plazas = sum(plazas), -->
                                                 <!--             prom_plazas = mean(plazas), -->
                                                 <!--             min_plazas  = min(plazas), -->
                                                 <!--             max_plazas  = max(plazas)) -->
                              <!-- ``` -->
                              
                              <!-- ## input / output -->
                              
                              <!-- <br> -->
                              
                              <!-- ::: columns -->
                              <!-- ::: {.column width="50%"} -->
                              
                              <!-- ![](https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExOHJ6NDl6MGtpbnE4bng3dGM5aDFtdDlpMXBpcDN3ZHlheWh5OWY3biZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/adNxtO8PpNOPS/giphy.gif) -->
                              
                              <!-- ::: -->
                              
                              <!-- ::: {.column width="50%"} -->
                              
                              <!-- - Toda funci√≥n tiene un `input` (ingredientes üßÇüåæüßÑ) y un `output` (la torta üéÇ) -->
                              
                              <!-- ::: -->
                              <!-- ::: -->
                              
                              <!-- ## input / output -->
                              
                              <!-- <br> -->
                              
                              <!-- - ¬øCu√°l es el output del `summarise()`? -->
                              
                              <!-- ## input / output -->
                              
                              <!-- <br> -->
                              
                              <!-- ```{r} -->
                              <!-- # Creo objeto -->
                              <!-- tabla_puna <- df_puna |> -->
                                <!--   group_by(indice_tiempo) |>  -->
                                <!--   summarise(cant_plazas = sum(plazas), -->
                                                   <!--             prom_plazas = mean(plazas), -->
                                                   <!--             min_plazas  = min(plazas), -->
                                                   <!--             max_plazas  = max(plazas)) -->
                                
                                <!-- # Chequeo tipo de objeto -->
                                <!-- class(tabla_puna) -->
                                <!-- ``` -->
                                
                                <!-- ## input / output -->
                                
                                <!-- <br> -->
                                
                                <!-- - ¬øY qu√© puedo hacer sobre un data frame? -->
                                
                                
                                <!-- ## input / output -->
                                
                                <!-- <br> -->
                                
                                <!-- ::: columns -->
                                <!-- :::{.column widt="50%} -->
<!-- ```{r} -->
<!-- #| code-line-numbers: "2" -->
<!-- #| eval: false -->
<!-- tabla_puna |>  -->
<!--   filter(indice_tiempo == 2022) -->
<!-- ``` -->
<!-- ::: -->

<!-- :::{.column widt="50%} -->
                                <!-- ```{r} -->
                                <!-- #| echo: false -->
                                <!-- tabla_puna |>  -->
                                <!--   filter(indice_tiempo == 2022) -->
                                <!-- ``` -->
                                <!-- ::: -->
                                <!-- ::: -->
                                
                                <!-- ## input / output -->
                                
                                <!-- <br> -->
                                
                                <!-- ::: columns -->
                                <!-- :::{.column widt="50%} -->
<!-- ```{r} -->
<!-- #| code-line-numbers: "3" -->
<!-- #| eval: false -->
<!-- tabla_puna |>  -->
<!--   filter(indice_tiempo == 2022) |>  -->
<!--   select(indice_tiempo, cant_plazas) -->
<!-- ``` -->
<!-- ::: -->

<!-- :::{.column widt="50%} -->
                                <!-- ```{r} -->
                                <!-- #| echo: false -->
                                <!-- tabla_puna |>  -->
                                <!--   filter(indice_tiempo == 2022) |>  -->
                                <!--   select(indice_tiempo, cant_plazas) -->
                                <!-- ``` -->
                                <!-- ::: -->
                                <!-- ::: -->
                                
                                
                                <!-- ## `tidyverse` en acci√≥n -->
                                
                                <!-- <br> -->
                                
                                <!-- ![](https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExazY5ZnJvaWsxYnp4bDZ2amtjOGhpc2ZxaGNobDVpOGlwa3VwcHhlZyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/sG4zmff2zDOp7t2MNA/giphy.gif) -->
                                
                                <!-- ## `tidyverse` en acci√≥n -->
                                
                                <!-- ::: columns -->
                                <!-- :::{.column widt="50%} -->
<!-- ```{r} -->
<!-- #| code-line-numbers: "2" -->
<!-- #| eval: false -->
<!-- df_puna |>  -->
<!--   select(indice_tiempo, tipo, plazas) -->
<!-- ``` -->
<!-- ::: -->

<!-- :::{.column widt="50%} -->
                                <!-- ```{r} -->
                                <!-- #| echo: false -->
                                <!-- df_puna |>  -->
                                <!--   select(indice_tiempo, tipo, plazas) -->
                                <!-- ``` -->
                                <!-- ::: -->
                                <!-- ::: -->
                                
                                
                                <!-- ## `tidyverse` en acci√≥n -->
                                
                                <!-- ::: columns -->
                                <!-- :::{.column widt="50%} -->
<!-- ```{r} -->
<!-- #| code-line-numbers: "3" -->
<!-- #| eval: false -->
<!-- df_puna |>  -->
<!--   select(indice_tiempo, tipo, plazas) |>  -->
<!--   filter(indice_tiempo %in% c(2021, 2022)) -->
<!-- ``` -->
<!-- ::: -->

<!-- :::{.column widt="50%} -->
                                <!-- ```{r} -->
                                <!-- #| echo: false -->
                                <!-- df_puna |>  -->
                                <!--   select(indice_tiempo, tipo, plazas) |>  -->
                                <!--   filter(indice_tiempo %in% c(2021, 2022)) -->
                                <!-- ``` -->
                                <!-- ::: -->
                                <!-- ::: -->
                                
                                
                                <!-- ## `tidyverse` en acci√≥n -->
                                
                                <!-- ::: columns -->
                                <!-- :::{.column widt="50%} -->
<!-- ```{r} -->
<!-- #| code-line-numbers: "4" -->
<!-- #| eval: false -->
<!-- df_puna |>  -->
<!--   select(indice_tiempo, tipo, plazas) |>  -->
<!--   filter(indice_tiempo %in% c(2021, 2022)) |>  -->
<!--   mutate(tipo_recod = case_when(tipo == "Hoteleros" ~ "Hoteleros", -->
<!--                                 .default = "Otros")) -->
<!-- ``` -->
<!-- ::: -->

<!-- :::{.column widt="50%} -->
                                <!-- ```{r} -->
                                <!-- #| echo: false -->
                                <!-- df_puna |>  -->
                                <!--   select(indice_tiempo, tipo, plazas) |>  -->
                                <!--   filter(indice_tiempo %in% c(2021, 2022)) |>  -->
                                <!--   mutate(tipo_recod = case_when(tipo == "Hoteleros" ~ "Hoteleros", -->
                                                                       <!--                                 .default = "Otros")) -->
                                <!-- ``` -->
                                <!-- ::: -->
                                <!-- ::: -->
                                
                                <!-- ## `tidyverse` en acci√≥n -->
                                
                                <!-- ::: columns -->
                                <!-- :::{.column widt="50%} -->
<!-- ```{r} -->
<!-- #| code-line-numbers: "6,7,8" -->
<!-- #| eval: false -->
<!-- df_puna |>  -->
<!--   select(indice_tiempo, tipo, plazas) |>  -->
<!--   filter(indice_tiempo %in% c(2021, 2022)) |>  -->
<!--   mutate(tipo_recod = case_when(tipo == "Hoteleros" ~ "Hoteleros", -->
<!--                                 .default = "Otros")) |>  -->
<!--   group_by(indice_tiempo, tipo_recod) |>  -->
<!--   summarise(cant_plazas = sum(plazas), -->
<!--             prom_plazas = mean(plazas)) -->
<!-- ``` -->
<!-- ::: -->

<!-- :::{.column widt="50%} -->
                                <!-- ```{r} -->
                                <!-- #| echo: false -->
                                <!-- df_puna |>  -->
                                <!--   select(indice_tiempo, tipo, plazas) |>  -->
                                <!--   filter(indice_tiempo %in% c(2021, 2022)) |>  -->
                                <!--   mutate(tipo_recod = case_when(tipo == "Hoteleros" ~ "Hoteleros", -->
                                                                       <!--                                 .default = "Otros")) |>  -->
                                <!--   group_by(indice_tiempo, tipo_recod) |>  -->
                                <!--   summarise(cant_plazas = sum(plazas), -->
                                                   <!--             prom_plazas = mean(plazas)) -->
                                <!-- ``` -->
                                <!-- ::: -->
                                <!-- ::: -->
                                
                                
                                <!-- ## `tidyverse` en acci√≥n  -->
                                
                                <!-- ![](https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExNXBmYmR4Nno1eDNrNjYwbnA1OG83cXRteXVibDNqd3h2aDdsbjRobCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/hXDrTueJWAscK3xWQ2/giphy.gif) -->
                                
                                
                                